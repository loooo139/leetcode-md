# c++ 笔记本

`const` :

```cpp
int i=10;
```



顶层const是指指针本身不变，比如`const int p=101`.顶层的const可以表示任意的对象是常量。

底层const是指指针指向的对象是常量不变，比如`const int * t=i`.这里的指针`t`就是一个底层的const。

```cpp
int i=0;
int *const p1=&1;//顶层的const，p1不变
const int ci=42;//顶层const，ci不变
const int * p2=&ci;//底层const，允许改变p2的值
const int * const p3=p2;//既是底层const，也是顶层const，右边的顶层，左边是底层
const &r=ci;//底层const，引用都是底层const  
```

底层和顶层的const对象主要区别在于对象的拷贝操作，顶层不受影响。另一方面底层的const拷贝是必须具有相同的底层const资格。或者两者能够相互转换。一般来说非常量可以转换为常量，反之则不行。

```cpp
int *p=p3;//错误，p3包含底层const定义，而p没有。
p2=p3;//正确，两者都有底层const
p2=&i;//正确 int *能够转换为const int *
int &r=ci;//错误，非常量不能绑定到常量上。
const int &r2=i;//正确 const int &可以绑定到一个普通int上。
```

另外在函数形参初始化的时候会自动忽略顶层的const，因此重载的时候需要注意const类型。

只有当函数确实需要改变元素的值的时候，才把形参定义为指向非常量的指针。

数组引用形参，形参可以是数组的引用的，才是，引用形参绑定到对应的实参上。

```cpp
//arr两端的括号比必不可少
void print(int (&arr)[10]){
    for(auto elem:arr)
        cout<<elem<<endl;
}
```

因为数组的大小是构成数组类型的一部分，所以只要不超过维度，在函数体内都可以放心的使用数组。但是这一做法无形中限制了print函数的可用性，我们只能讲函数作用于大小为10的数组。

```cpp
int i=0,j[2]={1,2};
int k[10]={0,1,2,3,4,5,6,7,8,9}；
print(&i)//错误，实参不是含有10个整数的数组
print(j);//错误，实参不是含有10个整数的数组
print(k)//正确，
```

### 传递多维数组

c++中没有真正的多维数组，所谓的多维数组其实是数组的数组而已。

和所有数组一样，当讲多维数组传递给函数的时候，真正传递的是指向数组首元素的指针。因为我们处理的是数组的数组，所以首元素本身就是一个数组，指针就是一个指向数组的指针。数组第二维以及后面的所有维度的大小都是数组类型的一部分，不能省略。

```cpp
//matrix 指向数组的首元素，该数组的元素是由10个整数构成的数组
void print(int(*matrix)[10],int rowSize){}
```

> `*matrix`两端的括号必不可少
>
> ```cpp
> int *matrix[10]; //10个指针构成的数组
> int (*matrix)[10];//指向含有10个整数的数组的指针。
> ```
>
> 